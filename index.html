<!DOCTYPE html>
<html>

<head>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        .center-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100vh;
        }

    </style>
</head>

<body>
    <div id="main">

    </div>
    <script type="text/babel">
        function random(i) {
            return Math.floor(Math.random() * i);
        }
        
        function getInitialState() {

            var localStorageState = window.localStorage.getItem("state");

            var state;
            if(localStorageState) {
                state = JSON.parse(localStorageState);
            }

            if (!state || !state.version) {
                state = {
                    version: 1,
                    questions: [],
                    time: {},
                    emojis: []
                }
            }

            state.questions = [];
            getQuestions(state);

            return state;
        }

        function getQuestions(state) {
            for(var a = 1; a <= 20; a++) {
                addQuestion(state, a + " + ? = 20", 20 - a, 10000);
                addQuestion(state, "? + " + a + " = 20", 20 - a, 10000);
            }
        }

        function addQuestion(state, text, answer, initialSpeed) {

            state.questions.push({
                text: text,
                answer: answer,
            });

            state.time[text] = state.time[text] || initialSpeed;
        }

        function Stats(props) {
            const [state, _setState] = React.useState(getInitialState);

            return <table className="table">
                <thead>
                    <tr>
                        <th scope="col">Question</th>
                        <th scope="col">Time</th>
                    </tr>
                </thead>
                <tbody>
                    {Object.entries(state.time).sort((a, b) => b[1] - a[1]).map(q=>{
                        return <tr>
                            <td>{q[0]}</td>
                            <td>{Math.round(Math.sqrt(q[1]))}s</td>
                        </tr>
                    })}
                </tbody>
            </table>
        }

        function App(props) {
            const [state, _setState] = React.useState(getInitialState);
            const setState = cb => {
                _setState(oldState => {
                    const newState = cb(oldState);
                    window.localStorage.setItem("state", JSON.stringify(newState));
                    return newState;
                });
            };

            const [panel, setPanel] = React.useState("Questions");

            const panelToShow = panel == "Questions" ? <Questions state={state} setState={setState}/> : <Settings state={state} setState={setState}/>;

            return (
             <div>
                <button type="button" className="btn btn-default" aria-label="Left Align" onClick={()=>setPanel("Settings")}>
                    <i className="fa fa-cog"></i>
                </button>
                { panelToShow }
             </div>
             );
        }

        function Settings(props) {
            const possibleQuestions = [];

            //addPlusOnesTo10(possibleQuestions);
            //addPlusOnesTo20(possibleQuestions);
            //addPlusOnesTo100(possibleQuestions);

            return (
            <form style={{marginLeft:"20px"}}>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out ajskdfjalksjakdlfjkalsdjfklajskldfjkals</label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
              <div className="checkbox"> <label> <input type="checkbox"/> Check me out </label> </div>
            </form>
            );
        }
 
        function Questions(props) {

            const nextQuestion = () => {

                var totalTime = 0;
                for(var i = 0; i < props.state.questions.length; i++) {
                    totalTime += props.state.time[props.state.questions[i].text];
                }

                const t = random(totalTime)
                totalTime = 0;
                for(var i = 0; i < props.state.questions.length; i++) {
                    totalTime += props.state.time[props.state.questions[i].text];
                    if (totalTime >= t) {
                        return {
                            index: i,
                            startTime: new Date()
                        };
                    }
                }
            };

            const [current, setCurrent] = React.useState(nextQuestion);

            const [value, setValue] = React.useState("");

            const [visible, setVisible] = React.useState(false);
            const [banner, setBanner] = React.useState({});

            const inputRef = React.useRef(null);

            const emojis = ["ðŸ˜€", "ðŸ˜", "ðŸ˜‚", "ðŸ¤£", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜…", "ðŸ˜†", "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‹", "ðŸ˜Ž", "ðŸ˜", "ðŸ¥°", "ðŸ˜˜", "ðŸ˜—", "ðŸ˜™", "ðŸ˜š", "â˜ºï¸", "ðŸ™‚", "ðŸ¤—", "ðŸ¤©", "ðŸ¤”", "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ™„", "ðŸ˜", "ðŸ˜£", "ðŸ˜¥", "ðŸ˜®", "ðŸ¤", "ðŸ˜¯", "ðŸ˜ª", "ðŸ˜«", "ðŸ˜´", "ðŸ˜Œ", "ðŸ˜›", "ðŸ˜œ", "ðŸ˜", "ðŸ¤¤", "ðŸ˜’", "ðŸ˜“", "ðŸ˜”", "ðŸ˜•", "ðŸ™ƒ", "ðŸ¤‘", "ðŸ˜²", "â˜¹ï¸", "ðŸ™", "ðŸ˜–", "ðŸ¥µ", "ðŸ˜ž", "ðŸ˜Ÿ", "ðŸ¥¶", "ðŸ¥´", "ðŸ˜¤", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜¦", "ðŸ˜§", "ðŸ¥³", "ðŸ˜¨", "ðŸ˜©", "ðŸ¤¯", "ðŸ˜¬", "ðŸ˜°", "ðŸ˜±", "ðŸ˜³", "ðŸ¤ª", "ðŸ˜µ", "ðŸ˜¡", "ðŸ¥º", "ðŸ˜ ", "ðŸ¤¬", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®", "ðŸ¤§", "ðŸ˜‡", "ðŸ¤ ", "ðŸ¤¥", "ðŸ¤«", "ðŸ¤­", "ðŸ§", "ðŸ¤“", "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ¤¡", "ðŸ‘¹", "ðŸ‘º", "ðŸ’€", "â˜ ï¸", "ðŸ‘»", "ðŸ‘½", "ðŸ‘¾", "ðŸ¤–", "ðŸ’©", "ðŸ™Š",
                            "ðŸ’‹", "ðŸ’˜", "ðŸ’", "ðŸ’–", "ðŸ’—", "ðŸ’“", "ðŸ’ž", "ðŸ’•", "ðŸ’Œ", "â£ï¸", "ðŸ’”", "â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ", "ðŸ–¤", "ðŸ’Ÿ", "ðŸ’", "ðŸ’Ž", "ðŸ’", "ðŸ’’",
                            "ðŸ¦¶", "ðŸ¤³", "ðŸ’ª", "ðŸ‘ˆ", "ðŸ‘‰", "â˜ï¸", "ðŸ‘†", "ðŸ–•", "ðŸ‘‡", "âœŒï¸", "ðŸ¤ž", "ðŸ––", "ðŸ¤˜", "ðŸ¤™", "ðŸ–ï¸", "âœ‹", "ðŸ‘Œ", "ðŸ‘", "ðŸ‘Ž", "âœŠ", "ðŸ‘Š", "ðŸ¤›", "ðŸ¤œ", "ðŸ¤š", "ðŸ‘‹", "ðŸ¤Ÿ", "âœï¸", "ðŸ‘", "ðŸ‘", "ðŸ™Œ", "ðŸ¤²", "ðŸ™", "ðŸ¤", "ðŸ‘‚", "ðŸ‘ƒ", "ðŸ‘€", "ðŸ‘ï¸", "ðŸ§ ", "ðŸ‘…", "ðŸ‘„",
                            "ðŸš¶â€â™‚ï¸", "ðŸš¶â€â™€ï¸", "ðŸƒâ€â™‚ï¸", "ðŸƒâ€â™€ï¸", "ðŸ’ƒ", "ðŸ•º", "ðŸ‘¯â€â™‚ï¸", "ðŸ‘¯â€â™€ï¸", "ðŸ§–â€â™‚ï¸", "ðŸ§–â€â™€ï¸", "ðŸ§—â€â™‚ï¸", "ðŸ§—â€â™€ï¸", "ðŸ§˜â€â™‚ï¸", "ðŸ§˜â€â™€ï¸", "ðŸ›Œ", "ðŸ•´ï¸", "ðŸ—£ï¸", "ðŸ¤º", "ðŸ‡", "â›·ï¸", "ðŸ‚", "ðŸŒï¸â€â™‚ï¸", "ðŸŒï¸â€â™€ï¸", "ðŸ„â€â™‚ï¸", "ðŸ„â€â™€ï¸", "ðŸš£â€â™‚ï¸", "ðŸš£â€â™€ï¸", "ðŸŠâ€â™‚ï¸", "ðŸŠâ€â™€ï¸", "â›¹ï¸â€â™‚ï¸", "â›¹ï¸â€â™€ï¸", "ðŸ‹ï¸â€â™‚ï¸", "ðŸ‹ï¸â€â™€ï¸", "ðŸš´â€â™‚ï¸", "ðŸš´â€â™€ï¸", "ðŸšµâ€â™‚ï¸", "ðŸšµâ€â™€ï¸", "ðŸŽï¸", "ðŸï¸", "ðŸ¤¸", "ðŸ¤¸â€â™‚ï¸", "ðŸ¤¸â€â™€ï¸", "ðŸ¤¼", "ðŸ¤¼â€â™‚ï¸", "ðŸ¤¼â€â™€ï¸", "ðŸ¤½", "ðŸ¤½â€â™‚ï¸", "ðŸ¤½â€â™€ï¸", "ðŸ¤¾", "ðŸ¤¾â€â™‚ï¸", "ðŸ¤¾â€â™€ï¸", "ðŸ¤¹", "ðŸ¤¹â€â™‚ï¸", "ðŸ¤¹â€â™€ï¸", "ðŸŽ–ï¸", "ðŸ†", "ðŸ…", "ðŸ¥‡", "ðŸ¥ˆ", "ðŸ¥‰", "âš½", "âš¾", "ðŸ€", "ðŸ", "ðŸˆ", "ðŸ‰", "ðŸŽ¾", "ðŸŽ³", "ðŸ", "ðŸ‘", "ðŸ¥Ž", "ðŸ’", "ðŸ“", "ðŸ¸", "ðŸ¥Š", "ðŸ¥‹", "ðŸ¥", "ðŸ¥…", "â›¸ï¸", "ðŸŽ£", "ðŸ¥", "ðŸŽ¿", "ðŸ›·", "ðŸ¥Œ", "ðŸŽ¯", "ðŸŽ±", "ðŸ§¿", "ðŸ§©", "ðŸ§¸", "ðŸ§µ", "ðŸ§¶",
                            "ðŸ¥­", "ðŸ‡", "ðŸˆ", "ðŸ‰", "ðŸŠ", "ðŸ‹", "ðŸŒ", "ðŸ", "ðŸŽ", "ðŸ", "ðŸ", "ðŸ‘", "ðŸ’", "ðŸ¥¬", "ðŸ“", "ðŸ¥", "ðŸ…", "ðŸ¥¥", "ðŸ¥‘", "ðŸ†", "ðŸ¥”", "ðŸ¥•", "ðŸŒ½", "ðŸŒ¶ï¸", "ðŸ¥¯", "ðŸ¥’", "ðŸ¥¦", "ðŸ¥œ", "ðŸŒ°", "ðŸž", "ðŸ¥", "ðŸ¥–", "ðŸ¥¨", "ðŸ¥ž", "ðŸ§€", "ðŸ–", "ðŸ—", "ðŸ¥©", "ðŸ¥“", "ðŸ”", "ðŸŸ", "ðŸ•", "ðŸŒ­", "ðŸ¥ª", "ðŸŒ®", "ðŸŒ¯", "ðŸ¥™", "ðŸ¥š", "ðŸ§‚", "ðŸ³", "ðŸ¥˜", "ðŸ²", "ðŸ¥£", "ðŸ¥—", "ðŸ¿", "ðŸ¥«", "ðŸ±", "ðŸ˜", "ðŸ™", "ðŸš", "ðŸ›", "ðŸœ", "ðŸ¥®", "ðŸ", "ðŸ ", "ðŸ¢", "ðŸ£", "ðŸ¤", "ðŸ¥", "ðŸ¡", "ðŸ¥Ÿ", "ðŸ¥ ", "ðŸ¥¡", "ðŸ¦", "ðŸ§", "ðŸ¨", "ðŸ©", "ðŸª", "ðŸ§", "ðŸŽ‚", "ðŸ°", "ðŸ¥§", "ðŸ«", "ðŸ¬", "ðŸ­", "ðŸ®", "ðŸ¯", "ðŸ¼", "ðŸ¥›", "â˜•", "ðŸµ", "ðŸ¶", "ðŸ¾", "ðŸ·", "ðŸ¸", "ðŸ¹", "ðŸº", "ðŸ»", "ðŸ¥‚", "ðŸ¥ƒ", "ðŸ¥¤", "ðŸ¥¢", "ðŸ½ï¸", "ðŸ´", "ðŸ¥„", "ðŸº",
                            "ðŸ˜º", "ðŸ˜¸", "ðŸ˜¹", "ðŸ˜»", "ðŸ˜¼", "ðŸ˜½", "ðŸ™€", "ðŸ˜¿", "ðŸ˜¾", "ðŸ™ˆ", "ðŸ™‰", "ðŸ¦", "ðŸµ", "ðŸ’", "ðŸ¦", "ðŸ¶", "ðŸ•", "ðŸ©", "ðŸº", "ðŸ¦Š", "ðŸ±", "ðŸˆ", "ðŸ¦", "ðŸ¯", "ðŸ…", "ðŸ†", "ðŸ´", "ðŸŽ", "ðŸ¦„", "ðŸ¦“", "ðŸ¦Œ", "ðŸ®", "ðŸ¦™", "ðŸ‚", "ðŸƒ", "ðŸ„", "ðŸ·", "ðŸ¦›", "ðŸ–", "ðŸ—", "ðŸ½", "ðŸ", "ðŸ‘", "ðŸ", "ðŸª", "ðŸ«", "ðŸ¦’", "ðŸ˜", "ðŸ¦", "ðŸ­", "ðŸ", "ðŸ€", "ðŸ¦˜", "ðŸ¹", "ðŸ¦¡", "ðŸ°", "ðŸ‡", "ðŸ¿ï¸", "ðŸ¦”", "ðŸ¦‡", "ðŸ»", "ðŸ¨", "ðŸ¼", "ðŸ¾", "ðŸ¦ƒ", "ðŸ”", "ðŸ¦¢", "ðŸ“", "ðŸ£", "ðŸ¤", "ðŸ¦š", "ðŸ¥", "ðŸ¦", "ðŸ¦œ", "ðŸ§", "ðŸ•Šï¸", "ðŸ¦…", "ðŸ¦†", "ðŸ¦‰", "ðŸ¸", "ðŸŠ", "ðŸ¢", "ðŸ¦Ž", "ðŸ", "ðŸ²", "ðŸ‰", "ðŸ¦•", "ðŸ¦–", "ðŸ³", "ðŸ‹", "ðŸ¬", "ðŸŸ", "ðŸ ", "ðŸ¡", "ðŸ¦ˆ", "ðŸ™", "ðŸš", "ðŸ¦€", "ðŸ¦Ÿ", "ðŸ¦", "ðŸ¦‘", "ðŸ¦ ", "ðŸŒ", "ðŸ¦‹", "ðŸ›", "ðŸœ", "ðŸ", "ðŸž", "ðŸ¦—", "ðŸ•·ï¸", "ðŸ•¸ï¸", "ðŸ¦‚", "ðŸ¦ž",
                            "ðŸŒ¸", "ðŸ’®", "ðŸµï¸", "ðŸŒ¹", "ðŸ¥€", "ðŸŒº", "ðŸŒ»", "ðŸŒ¼", "ðŸŒ·", "ðŸŒ±", "ðŸŒ²", "ðŸŒ³", "ðŸŒ´", "ðŸŒµ", "ðŸŒ¾", "ðŸŒ¿", "â˜˜ï¸", "ðŸ€", "ðŸ", "ðŸ‚", "ðŸƒ", "ðŸ„",
                            "ðŸ¦·", "ðŸ¦´", "ðŸ›€", "ðŸ‘£", "ðŸ’£", "ðŸ”ª", "ðŸ§±", "ðŸ›¢ï¸", "â›½", "ðŸ›¹", "ðŸš¥", "ðŸš¦", "ðŸš§", "ðŸ›Žï¸", "ðŸ§³", "â›±ï¸", "ðŸ”¥", "ðŸ§¨", "ðŸŽ—ï¸", "ðŸŽŸï¸", "ðŸŽ«", "ðŸ§§", "ðŸ”®", "ðŸŽ²", "ðŸŽ´", "ðŸŽ­", "ðŸ–¼ï¸", "ðŸŽ¨", "ðŸŽ¤", "ðŸ”", "ðŸ”Ž", "ðŸ•¯ï¸", "ðŸ’¡", "ðŸ”¦", "ðŸ®", "ðŸ“œ", "ðŸ§®", "ðŸ”‘", "ðŸ—ï¸", "ðŸ”¨", "â›ï¸", "âš’ï¸", "ðŸ› ï¸", "ðŸ—¡ï¸", "âš”ï¸", "ðŸ”«", "ðŸ¹", "ðŸ›¡ï¸", "ðŸ”§", "ðŸ”©", "âš™ï¸", "ðŸ—œï¸", "âš–ï¸", "â›“ï¸", "âš—ï¸", "ðŸ”¬", "ðŸ”­", "ðŸ“¡", "ðŸ’‰", "ðŸ’Š", "ðŸšª", "ðŸ›ï¸", "ðŸ›‹ï¸", "ðŸš½", "ðŸš¿", "ðŸ›", "ðŸ›’", "ðŸš¬", "âš°ï¸", "âš±ï¸", "ðŸ§°", "ðŸ§²", "ðŸ§ª", "ðŸ§´", "ðŸ§·", "ðŸ§¹", "ðŸ§»", "ðŸ§¼", "ðŸ§½", "ðŸ§¯", "ðŸ’ ", "â™Ÿï¸",
                            "ðŸ’…", "ðŸ‘“", "ðŸ•¶ï¸", "ðŸ‘”", "ðŸ‘•", "ðŸ‘–", "ðŸ§£", "ðŸ§¤", "ðŸ§¥", "ðŸ§¦", "ðŸ‘—", "ðŸ‘˜", "ðŸ‘™", "ðŸ‘š", "ðŸ‘›", "ðŸ‘œ", "ðŸ‘", "ðŸ›ï¸", "ðŸŽ’", "ðŸ‘ž", "ðŸ‘Ÿ", "ðŸ‘ ", "ðŸ‘¡", "ðŸ‘¢", "ðŸ‘‘", "ðŸ‘’", "ðŸŽ©", "ðŸŽ“", "ðŸ§¢", "â›‘ï¸", "ðŸ“¿", "ðŸ’„", "ðŸŒ‚", "â˜‚ï¸", "ðŸŽ½", "ðŸ¥½", "ðŸ¥¼", "ðŸ¥¾", "ðŸ¥¿", "ðŸ§º",
                            "ðŸŒ", "ðŸŒŽ", "ðŸŒ", "ðŸŒ", "ðŸ—ºï¸", "ðŸ—¾", "ðŸ”ï¸", "â›°ï¸", "ðŸ—»", "ðŸ•ï¸", "ðŸ–ï¸", "ðŸœï¸", "ðŸï¸", "ðŸžï¸", "ðŸŸï¸", "ðŸ›ï¸", "ðŸ—ï¸", "ðŸ˜ï¸", "ðŸšï¸", "ðŸ ", "ðŸ¡", "ðŸ¢", "ðŸ£", "ðŸ¤", "ðŸ¥", "ðŸ¦", "ðŸ¨", "ðŸ©", "ðŸª", "ðŸ«", "ðŸ¬", "ðŸ­", "ðŸ¯", "ðŸ°", "ðŸ—¼", "ðŸ—½", "â›ª", "ðŸ•Œ", "ðŸ•", "â›©ï¸", "ðŸ•‹", "â›²", "â›º", "ðŸ™ï¸", "ðŸŽ ", "ðŸŽ¡", "ðŸŽ¢", "ðŸŽª", "â›³", "ðŸ—¿",
                            "ðŸ’¦", "ðŸŒ‹", "ðŸŒ", "ðŸŒƒ", "ðŸŒ„", "ðŸŒ…", "ðŸŒ†", "ðŸŒ‡", "ðŸŒ‰", "ðŸŒŒ", "ðŸŒ‘", "ðŸŒ’", "ðŸŒ“", "ðŸŒ”", "ðŸŒ•", "ðŸŒ–", "ðŸŒ—", "ðŸŒ˜", "ðŸŒ™", "ðŸŒš", "ðŸŒ›", "ðŸŒœ", "ðŸŒ¡ï¸", "â˜€ï¸", "ðŸŒ", "ðŸŒž", "ðŸŒŸ", "ðŸŒ ", "â˜ï¸", "â›…", "â›ˆï¸", "ðŸŒ¤ï¸", "ðŸŒ¥ï¸", "ðŸŒ¦ï¸", "ðŸŒ§ï¸", "ðŸŒ¨ï¸", "ðŸŒ©ï¸", "ðŸŒªï¸", "ðŸŒ«ï¸", "ðŸŒ¬ï¸", "ðŸŒ€", "ðŸŒˆ", "â˜”", "â„ï¸", "â˜ƒï¸", "â›„", "â˜„ï¸", "ðŸ’§", "ðŸŒŠ", "ðŸŽ‘"];

            const successText = [
                "Well done",
                "Woohoo",
                "Nice one",
                "Congrats",
                "You're doing great",
                "Success",
                "Great",
                "Brilliant",
                "Amazing",
                "Nice",
                "Awesome",
                "Incredible",
                "Stunning",
            ]

            const failText = [
                "Unlucky, try again",
                "Almost, try again",
                "Not quite, try again",
                "Sad face, try again",
                "That isn't it, try again",
            ]

            const onSubmit = e=>{

                e.preventDefault();

                setVisible(true);
                setTimeout(()=>setVisible(false), 3000);

                if(props.state.questions[current.index].answer == value) {
                    props.setState(oldState=>{
                        const todayDate = new Date();
                        todayDate.setHours(0);
                        todayDate.setMinutes(0);
                        todayDate.setSeconds(0);
                        todayDate.setMilliseconds(0);
                        const today = todayDate.getTime();

                        if(oldState.emojis.length == 0 || oldState.emojis[oldState.emojis.length - 1].date - today != 0) {
                            oldState.emojis.push({date: today, score: 0, emojis: ""});
                        }
                        oldState.emojis[oldState.emojis.length - 1].score++;
                        oldState.emojis[oldState.emojis.length - 1].emojis = emojis[random(emojis.length)] + oldState.emojis[oldState.emojis.length - 1].emojis;
                            
                        const oldTime = oldState.time[oldState.questions[current.index].text];
                            
                        const secondsToAnswer = (new Date() - current.startTime) / 1000;

                        const newTime = secondsToAnswer < 3 ? 3 : secondsToAnswer > 30 ? oldTime : secondsToAnswer * secondsToAnswer;

                        const averageTime = Math.round(oldTime * 0.5 + newTime * 0.5);
                            
                        oldState.time[oldState.questions[current.index].text] = averageTime;

                        return oldState;
                    });
                        
                    setCurrent(nextQuestion());

                    setBanner({
                        class: "alert-success",
                        text: successText[Math.floor(Math.random() * successText.length)] + "!"
                    })

                } else {
                    setBanner({
                        class: "alert-danger",
                        text: failText[Math.floor(Math.random() * failText.length)] + "!"
                    })
                }

                setValue("");

                inputRef.current.focus();
                e.preventDefault();
            }

            return (
                <div className="center-screen" style={{marginLeft: "5%", marginRight: "5%"}}>
                <div style={{width: "100%"}}>
                <h1>
                <div style={{ textAlign: "center", width: "auto" }}>
                    Emoji Maths
                </div>
                <div style={{opacity: visible?1:0, transitionProperty: "opacity", transitionDuration: visible?"0s":"1s"}}>
                    <div style={{textAlign: "center", width: "auto"}} className={"alert " + banner.class}>
                        {banner.text}
                    </div>
                </div>
                <div className="shadow p-3 mb-5 bg-white rounded">
                    <div style={{padding: "30px"}}>
                        <form className="form-group" onSubmit={onSubmit} style={{textAlign: "center"}}>
                            <label htmlFor="answer" style={{textAlign: "center", fontSize:"2em"}}> {props.state.questions[current.index].text} </label>
                            <div><input autoFocus={true} style={{margin: "auto", fontSize:"2em", position: "relative", textAlign: "center", width: "5em"}} className="form-control form-control-lg" id="answer" ref={inputRef} type="number" min="0" value={value} onChange={e=>setValue(e.target.value)} /></div>
                            <span><input className="btn btn-primary" type="submit" value="Submit" /></span>
                        </form>
                        <Score emojis={props.state.emojis}/>
                   </div>
                </div>
                </h1>
                </div>
                </div>
            );
        }

        function Score(props) {
            const score = props.emojis.slice();
            return score.reverse().map(e=>{
                return <div style={{ marginLeft:"10%", marginRight:"10%" }}>
                    <div style={{ textAlign: "left" }}><h5><span className="badge badge-light">{new Date(e.date).toDateString()}</span></h5></div>
                    <div style={{ textAlign: "center", fontSize:"1em" }}>{e.emojis}</div>
                    {e.score > 0 ? <div style={{ textAlign: "center", fontSize:"1em", margin: 20, marginBottom: 40}}><span className="badge badge-success">{e.score}</span></div> : <div />}
                    <hr/>
                </div>
            })
        }

        if (window.location.hash && window.location.hash.substring(1) == "stats") {
            ReactDOM.render(<Stats />, document.getElementById('main'));
        } else {
            ReactDOM.render(<App />, document.getElementById('main'));
        }

    </script>
</body>
